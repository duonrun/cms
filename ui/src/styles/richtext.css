.richtext {
	display: block;
	width: 100%;
	padding: 0.375rem 0;
	color: var(--cms-color-neutral-900);
	font-size: var(--cms-font-size-sm);
	line-height: 1.5rem;
	border: 0;
	border-radius: var(--cms-radius-md);
	box-shadow:
		inset 0 0 0 1px var(--cms-color-neutral-300),
		var(--cms-shadow-sm);

	&:focus-within {
		box-shadow:
			inset 0 0 0 2px var(--cms-color-info-700),
			var(--cms-shadow-sm);
	}

	&.required {
		border-left: 4px solid var(--cms-color-warning-700);
	}

	&.embed {
		border: 0 !important;
		padding: 0;
		margin-top: 0;
	}

	button.active {
		background-color: var(--cms-color-info-700);
		color: var(--cms-color-white);
	}

	&.richtext-inline {
		position: relative;
		margin-top: 0;
		padding: 0;
		box-shadow: var(--cms-shadow-sm);

		&::after {
			color: var(--cms-color-neutral-400);
			content: 'RICHTEXT';
			display: inline-block;
			font-size: 70%;
			font-weight: 300;
			position: absolute;
			top: 9px;
			right: 10px;
			opacity: 1;
			letter-spacing: 0.05em;
			transition: opacity 0.4s linear;
		}
	}

	svg {
		display: inline-block;
	}

	.hide {
		display: none;
	}

	.richtext-toolbar {
		margin-bottom: 0;
	}

	.cms-richtext-toolbar {
		position: relative;
		z-index: 10;
	}

	.cms-richtext-toolbar-open {
		display: flex;
	}

	.cms-richtext-bubble {
		border-radius: var(--cms-radius);
		background-color: var(--cms-color-neutral-600);
		padding: 0 var(--cms-space-1);
		color: var(--cms-color-white);
	}

	.cms-richtext-extras-source {
		text-align: right;
	}

	.cms-richtext-source-btn-compact {
		margin-top: var(--cms-space-1);
		margin-bottom: var(--cms-space-1);
		padding: var(--cms-space-1);
	}

	.cms-richtext-source-label {
		margin-left: var(--cms-space-1);
	}

	.cms-richtext-dropdown-wrap {
		position: relative;
		display: inline-block;
		text-align: left;
	}

	.cms-richtext-dropdown-icon {
		height: 1.25rem;
		width: 1.25rem;
		margin-left: var(--cms-space-2);
		margin-right: calc(-1 * var(--cms-space-1));
	}

	.cms-richtext-dropdown-items {
		padding: var(--cms-space-1) 0;
	}

	.cms-richtext-dropdown-item-label {
		margin-left: var(--cms-space-2);
	}

	.cms-richtext-toolbar-btns-grow {
		flex-grow: 1;
	}

	.cms-richtext-source-btn-offset {
		margin-left: var(--cms-space-3);
	}

	.cms-richtext-layer-base {
		position: relative;
		z-index: 0;
	}

	.richtext-editor {
		max-width: 100%;
	}

	.cms-richtext-content {
		/* Placeholder for richtext editor content styling */
	}

	.cms-richtext-source-input {
		height: 16rem;
		width: 100%;
		border: 0;
		background-color: var(--cms-color-neutral-700);
		padding: var(--cms-space-1);
		font-family:
			'JetBrains Mono', 'Menlo', 'DejaVu Sans Mono', 'Liberation Mono', 'Consolas',
			'Ubuntu Mono', 'Courier New', 'andale mono', 'lucida console', monospace;
		color: var(--cms-color-white);
	}

	.richtext-dropdown-button {
		margin-left: var(--cms-space-px);
		display: inline-flex;
		width: 100%;
		justify-content: center;
		background-color: var(--cms-color-white);
		padding: var(--cms-space-2) var(--cms-space-4);
		font-size: var(--cms-font-size-sm);
		font-weight: 600;
		color: var(--cms-color-neutral-700);
		outline: none;
	}

	.richtext-dropdown-button:hover {
		background-color: var(--cms-color-neutral-50);
	}

	.richtext-dropdown-button:focus-visible {
		box-shadow:
			0 0 0 2px var(--cms-color-info-700),
			0 0 0 4px color-mix(in srgb, var(--cms-color-neutral-100) 70%, white);
	}

	.richtext-dropdown-menu {
		position: absolute;
		left: 0;
		margin-top: var(--cms-space-2);
		width: 16rem;
		transform-origin: top right;
		border-radius: var(--cms-radius);
		background-color: var(--cms-color-white);
		box-shadow: var(--cms-shadow-lg);
		border: 1px solid color-mix(in srgb, var(--cms-color-black) 5%, transparent);
		outline: none;
	}

	.richtext-dropdown-item {
		display: flex;
		width: 100%;
		align-items: center;
		padding: var(--cms-space-2) var(--cms-space-4);
		font-size: var(--cms-font-size-sm);
		color: var(--cms-color-neutral-700);
	}

	.richtext-toolbar-btn {
		position: relative;
		width: 1.75rem;
		margin-top: var(--cms-space-1);
		margin-bottom: var(--cms-space-1);
		margin-left: var(--cms-space-px);
		padding: var(--cms-space-1);
		border-radius: var(--cms-radius);
		font-size: var(--cms-font-size-sm);
	}

	.richtext-source-btn {
		margin-right: var(--cms-space-4);
		font-size: var(--cms-font-size-sm);
	}

	.ProseMirror {
		padding: var(--cms-space-1) var(--cms-space-2);
		max-height: 60vh;
		overflow-y: auto;
		white-space: pre-wrap;

		h1,
		h2,
		h3 {
			font-weight: 700;
			line-height: 1.25;
			margin: 0 0 var(--cms-space-3);
		}

		h1 {
			font-size: 1.5rem;
		}

		h2 {
			font-size: 1.25rem;
		}

		h3 {
			font-size: 1.125rem;
		}

		p,
		ul,
		ol,
		blockquote,
		pre {
			margin: 0 0 var(--cms-space-3);
		}

		ul,
		ol {
			padding-left: var(--cms-space-6);
		}

		blockquote {
			border-left: 4px solid var(--cms-color-neutral-300);
			padding-left: var(--cms-space-3);
			color: var(--cms-color-neutral-600);
		}

		pre {
			padding: var(--cms-space-3);
			background-color: var(--cms-color-neutral-100);
			border-radius: var(--cms-radius);
			overflow-x: auto;
		}

		a {
			color: var(--cms-color-info-700);
			text-decoration: underline;
		}

		> *:last-child {
			margin-bottom: 0;
		}

		.cms-text-xs {
			font-size: var(--cms-font-size-xs);
			line-height: var(--cms-line-height-xs);
		}
		.cms-text-sm {
			font-size: var(--cms-font-size-sm);
			line-height: var(--cms-line-height-sm);
		}
		.cms-text-base {
			font-size: var(--cms-font-size-base);
			line-height: var(--cms-line-height-base);
		}
		.cms-text-lg {
			font-size: var(--cms-font-size-lg);
			line-height: var(--cms-line-height-lg);
		}
		.cms-text-xl {
			font-size: var(--cms-font-size-xl);
			line-height: var(--cms-line-height-xl);
		}
		.cms-text-2xl {
			font-size: var(--cms-font-size-2xl);
			line-height: var(--cms-line-height-2xl);
		}
		.cms-text-3xl {
			font-size: var(--cms-font-size-3xl);
			line-height: var(--cms-line-height-3xl);
		}
	}

	.ProseMirror-focused {
		border: 0;
		outline: none;
	}

	.ProseMirror-gapcursor {
		display: none;
		pointer-events: none;
		position: absolute;

		&::after {
			content: '';
			display: block;
			position: absolute;
			top: -2px;
			width: 20px;
			border-top: 1px solid var(--cms-color-neutral-900);
			animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
		}
	}

	.ProseMirror-focused .ProseMirror-gapcursor {
		display: block;
	}
}

.grid-field .richtext {
	border-radius: 0;
	box-shadow: none;
}
